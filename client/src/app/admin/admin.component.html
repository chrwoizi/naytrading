<section class="policy bg-light">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <h2>Admin</h2>
        <hr />
        <dl class="dl-horizontal">
          <dt>Whitelist:</dt>
          <dd>
            <a routerLink="/whitelist" class="btn btn-secondary" role="button"
              >Manage Whitelist</a
            >
          </dd>
          <dt>Export:</dt>
          <dd>
            <a
              href="/api/export/log?token={{ token }}"
              class="btn btn-secondary"
              role="button"
              >Log</a
            >
          </dd>
          <dt>Instruments:</dt>
          <dd>
            <button (click)="updateInstruments()" class="btn btn-danger">
              Refresh Default Instruments
            </button>
            <br />
            <br />
            <div class="form-group">
              <label for="url">URL</label>
              <input
                type="text"
                [(ngModel)]="addInstrumentUrl"
                class="form-control"
              />
            </div>
            <div class="form-group">
              <input
                (click)="addInstrument()"
                value="Add by URL"
                class="btn btn-danger"
              />
            </div>
          </dd>
          <dt>Refresh Rates:</dt>
          <dd>
            <div class="form-group">
              <label for="id">Snapshot ID</label>
              <input
                type="number"
                class="form-control"
                [(ngModel)]="refreshId"
              />
            </div>
            <div class="form-group">
              <label for="source">Source</label>
              <select class="form-control" [(ngModel)]="refreshSource">
                <option></option>
                <option *ngFor="let source of sources" [value]="source">
                  {{ source.source }}
                </option>
              </select>
            </div>
            <div class="form-group">
              <label for="market">Market</label>
              <select class="form-control" [(ngModel)]="refreshMarket">
                <option></option>
                <option *ngFor="let market of markets" [value]="market">
                  {{ market.market }}
                </option>
              </select>
            </div>
            <button (click)="refreshRates()" class="btn btn-danger">
              Refresh Rates
            </button>
          </dd>
          <dt>Clear stats:</dt>
          <dd>
            <button class="btn btn-danger" (click)="clearStats()">
              Delete all stats
            </button>
          </dd>
          <dt>Config:</dt>
          <dd>
            <button class="btn btn-danger" (click)="reloadConfig()">
              Reload
            </button>
          </dd>
          <dt>Users:</dt>
          <dd>
            <option *ngFor="let user of users">
              {{ user.last_login }} {{ user.username }}
            </option>
          </dd>
        </dl>
      </div>
    </div>
  </div>
</section>
